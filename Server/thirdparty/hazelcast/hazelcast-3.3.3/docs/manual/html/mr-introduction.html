<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Hazelcast Documentation Version: 3.3.3</title>

    <link type="text/css" rel="stylesheet" href="assets/css/reset.css">
    <link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/github.min.css">
    <link type="text/css" rel="stylesheet" href="assets/css/docs.css">
    <link type="text/css" rel="stylesheet" href="assets/css/print.css" media="print">
    

    <script type="text/javascript" src="assets/js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.sticky-kit.js"></script>
    <script type="text/javascript" src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
    <script type="text/javascript" src="assets/js/lunr.min.js"></script>

    

    <script type="text/javascript">var BASE_URL = "";</script>
    <script type="text/javascript" src="assets/js/viewer.js"></script>

    <script type="text/javascript">
  	$(function(){
		$("#sidebar").stick_in_parent()
	});
    </script>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-3921306-1']);
        _gaq.push(['_setDomainName', 'hazelcast.com']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
    <script type="text/javascript">
        setTimeout(function(){var a=document.createElement("script");
            var b=document.getElementsByTagName("script")[0];
            a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0020/7413.js?"+Math.floor(new Date().getTime()/3600000);
            a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
    </script>

</head>
<body>
    <div id="page">
        <a name="top" />
         <div id="sitebar">
    <div class="content">
      <p><a href="http://hazelcast.org/documentation">Go to <span style="font-weight:bold">hazelcast.org/documentation</span></a></p>
      </div>
  </div>

        <header id="header">
			<div class="content">
			<div style="overflow:hidden">
				<div style="float:left">
                    <a href="http://www.hazelcast.org"><img src="assets/img/logo.png" style="width: 199px;padding-top: 18px"/></a>
					
				</div>	
				<div style="float:left;padding-top: 15px;padding-left: 30px;">
<h1><a href="">Documentation <span style="font-size:12px"> Version: 3.3.3 - Publication Date : Nov 12, 2014 </span></a></h1>
				</div>
			</div>
			</div>
        </header>
        <div class="content" style="width:1200px; margin: 0 auto">
	        

	<div id="sidebar" style="overflow-y:auto">
	    <form action="search.html"><input id="search" type="text" placeholder="Search" name="q" /></form>
	    <nav id="toc">
	        
    <ol>
    
        <li>
            <a href="preface.html">Preface</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="whatsnew.html">What's New in Hazelcast 3.3</a>
            
                
    <ol>
    
        <li>
            <a href="whatsnew.html">Release Notes</a>
            
                
    <ol>
    
        <li>
            <a href="whatsnew.html">New Features</a>
            
        </li>
    
        <li>
            <a href="whatsnewfixes.html">Fixes</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="upgradingfrom2x.html">Upgrading from 2.x versions</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="documentrevisionhistory.html">Document Revision History</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="gettingstarted.html">Getting Started</a>
            
                
    <ol>
    
        <li>
            <a href="gettingstarted.html">Hazelcast Overview</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="whyhazelcast.html">Why Hazelcast?</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="installation.html">Installation</a>
            
                
    <ol>
    
        <li>
            <a href="installation.html">Hazelcast</a>
            
        </li>
    
        <li>
            <a href="installinghzenterprise.html">Hazelcast Enterprise</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="startingclusterclient.html">Starting the Cluster and Client</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="configuringhazelcast.html">Configuring Hazelcast</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="usecases.html">Use Cases</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="resources.html">Resources</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="distributed-data-structures.html">Distributed Data Structures</a>
            
                
    <ol>
    
        <li>
            <a href="map.html">Map</a>
            
                
    <ol>
    
        <li>
            <a href="map.html">Map Overview</a>
            
        </li>
    
        <li>
            <a href="map-backups.html">Map Backups</a>
            
        </li>
    
        <li>
            <a href="map-eviction.html">Eviction</a>
            
        </li>
    
        <li>
            <a href="map-inmemoryformat.html">In Memory Format</a>
            
        </li>
    
        <li>
            <a href="map-persistence.html">Map Persistence</a>
            
        </li>
    
        <li>
            <a href="map-nearcache.html">Near Cache</a>
            
        </li>
    
        <li>
            <a href="map-locks.html">Map Locks</a>
            
        </li>
    
        <li>
            <a href="map-entrystatistics.html">Entry Statistics</a>
            
        </li>
    
        <li>
            <a href="map-entrylistener.html">Entry Listener</a>
            
        </li>
    
        <li>
            <a href="map-interceptors.html">Interceptors</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="queue.html">Queue</a>
            
                
    <ol>
    
        <li>
            <a href="queue.html">Queue Overview</a>
            
        </li>
    
        <li>
            <a href="samplequeuecode.html">Sample Queue Code</a>
            
        </li>
    
        <li>
            <a href="boundedqueue.html">Bounded Queue</a>
            
        </li>
    
        <li>
            <a href="queue-persistence.html">Queue Persistence</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="multimap.html">MultiMap</a>
            
                
    <ol>
    
        <li>
            <a href="multimap.html">Sample MultiMap Code</a>
            
        </li>
    
        <li>
            <a href="multimap.html">MultiMap Configuration</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="set.html">Set</a>
            
                
    <ol>
    
        <li>
            <a href="set.html">Sample Set Code</a>
            
        </li>
    
        <li>
            <a href="set.html">Event Registration and Configuration for Set</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="list.html">List</a>
            
                
    <ol>
    
        <li>
            <a href="list.html">Sample List Code</a>
            
        </li>
    
        <li>
            <a href="list.html">Event Registration and Configuration for List</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="topic.html">Topic</a>
            
                
    <ol>
    
        <li>
            <a href="topic.html">Sample Topic Code</a>
            
        </li>
    
        <li>
            <a href="topicstatistics.html">Statistics</a>
            
        </li>
    
        <li>
            <a href="topicinternals.html">Internals</a>
            
        </li>
    
        <li>
            <a href="topicconfiguration.html">Topic Configuration</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="lock.html">Lock</a>
            
                
    <ol>
    
        <li>
            <a href="lockicondition.html">ICondition</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="iatomiclong.html">IAtomicLong</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="isemaphore.html">ISemaphore</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="iatomicreference.html">IAtomicReference</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="icountdownlatch.html">ICountDownLatch</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="idgenerator.html">IdGenerator</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="replicatedmap.html">Replicated Map</a>
            
                
    <ol>
    
        <li>
            <a href="considerations.html">For Consideration</a>
            
        </li>
    
        <li>
            <a href="breakagemapcontract.html">Breakage of the Map-Contract</a>
            
        </li>
    
        <li>
            <a href="technicaldesign.html">Technical design</a>
            
        </li>
    
        <li>
            <a href="inmemoryformat.html">In Memory Format on ReplicatedMap</a>
            
        </li>
    
        <li>
            <a href="entrylistener.html">EntryListener on ReplicatedMap</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="distributedevents.html">Distributed Events</a>
            
                
    <ol>
    
        <li>
            <a href="distributedevents.html">Event Listeners</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="globaleventconfiguration.html">Global Event Configuration</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="distributedcomputing.html">Distributed Computing</a>
            
                
    <ol>
    
        <li>
            <a href="distributedcomputing.html">Executor Service</a>
            
                
    <ol>
    
        <li>
            <a href="distributedcomputing.html">Executor Overview</a>
            
        </li>
    
        <li>
            <a href="execution.html">Execution</a>
            
        </li>
    
        <li>
            <a href="executioncancellation.html">Execution Cancellation</a>
            
        </li>
    
        <li>
            <a href="executioncallback.html">Execution Callback</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="entryprocessor.html">Entry Processor</a>
            
                
    <ol>
    
        <li>
            <a href="entryprocessor.html">Entry Processor Overview</a>
            
        </li>
    
        <li>
            <a href="entryprocessorsamplecode.html">Sample Entry Processor Code</a>
            
        </li>
    
        <li>
            <a href="entryprocessorabstract.html">Abstract Entry Processor</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="distributedquery.html">Distributed Query</a>
            
                
    <ol>
    
        <li>
            <a href="distributedquery.html">Query Overview</a>
            
                
    <ol>
    
        <li>
            <a href="querycriteriaapi.html">Criteria API</a>
            
        </li>
    
        <li>
            <a href="querysql.html">Distributed SQL Query</a>
            
        </li>
    
        <li>
            <a href="querypagingpredicate.html">Paging Predicate (Order &amp; Limit)</a>
            
        </li>
    
        <li>
            <a href="queryindexing.html">Indexing</a>
            
        </li>
    
        <li>
            <a href="querythreadconfiguration.html">Query Thread Configuration</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="mapreduce.html">MapReduce</a>
            
                
    <ol>
    
        <li>
            <a href="mr-essentials.html">MapReduce Essentials</a>
            
        </li>
    
        <li>
            <a href="mr-introduction.html">Introduction to MapReduce API</a>
            
        </li>
    
        <li>
            <a href="mr-architecture.html">Hazelcast MapReduce Architecture</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="aggregators.html">Aggregators</a>
            
                
    <ol>
    
        <li>
            <a href="aggregators.html">Aggregations Basics</a>
            
        </li>
    
        <li>
            <a href="aggregatorsintroduction.html">Introduction to Aggregations API</a>
            
        </li>
    
        <li>
            <a href="aggregatorsexample.html">Aggregations Examples</a>
            
        </li>
    
        <li>
            <a href="aggregatorsimplementation.html">Implementing Aggregations</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="continuousquery.html">Continuous Query</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="userdefinedservices.html">User Defined Services</a>
            
                
    <ol>
    
        <li>
            <a href="userdefinedservices.html">Sample Case</a>
            
                
    <ol>
    
        <li>
            <a href="spicreateclass.html">Create the Class</a>
            
        </li>
    
        <li>
            <a href="spienableclass.html">Enable the Class</a>
            
        </li>
    
        <li>
            <a href="spiaddproperties.html">Add Properties</a>
            
        </li>
    
        <li>
            <a href="spistartservice.html">Start the Service</a>
            
        </li>
    
        <li>
            <a href="spiproxy.html">Place a Remote Call - Proxy</a>
            
        </li>
    
        <li>
            <a href="spicreatecontainer.html">Create the Containers</a>
            
        </li>
    
        <li>
            <a href="spipartitionmigration.html">Partition Migration</a>
            
        </li>
    
        <li>
            <a href="spicreatebackups.html">Create the Backups</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="spiwaitnotifyservice.html">WaitNotifyService</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="transactions.html">Transactions</a>
            
                
    <ol>
    
        <li>
            <a href="transactions.html">Transaction Interface</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="xatransactions.html">XA Transactions</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="j2eeintegration.html">J2EE Integration</a>
            
                
    <ol>
    
        <li>
            <a href="j2eeintegration.html">Sample Code for J2EE Integration</a>
            
        </li>
    
        <li>
            <a href="resourceadapterconfiguration.html">Resource Adapter Configuration</a>
            
        </li>
    
        <li>
            <a href="sampleglassfishconfiguration.html">Sample Glassfish v3 Web Application Configuration</a>
            
        </li>
    
        <li>
            <a href="samplejbossconfiguration.html">Sample JBoss AS 5 Web Application Configuration</a>
            
        </li>
    
        <li>
            <a href="samplejboss7configuration.html">Sample JBoss AS 7 / EAP 6 Web Application Configuration</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="jcache.html">Hazelcast JCache Implementation</a>
            
                
    <ol>
    
        <li>
            <a href="jcache.html">JCache Overview</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="jcache.html">Setup and Usage</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="jcache.html">Provider Types</a>
            
                
    <ol>
    
        <li>
            <a href="jcache.html">Client Provider</a>
            
        </li>
    
        <li>
            <a href="jcache.html">Server Provider</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="jcache.html">Provider Setup</a>
            
                
    <ol>
    
        <li>
            <a href="jcache.html">Hazelcast Specific System Property</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="jcache.html">Sample JCache Code</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="jcache.html">Hazelcast Cache Extension - ICache</a>
            
                
    <ol>
    
        <li>
            <a href="jcache.html">Async operations</a>
            
        </li>
    
        <li>
            <a href="jcache.html">Custom ExpiryPolicy</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="jcache.html">Running the JCache TCK</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="integratedclustering.html">Integrated Clustering</a>
            
                
    <ol>
    
        <li>
            <a href="integratedclustering.html">Hibernate Second Level Cache</a>
            
                
    <ol>
    
        <li>
            <a href="integratedclustering.html">Sample Code for Hibernate</a>
            
        </li>
    
        <li>
            <a href="integratedclustering.html">Supported Hibernate Versions</a>
            
        </li>
    
        <li>
            <a href="integratedclustering.html">Hibernate Configuration</a>
            
        </li>
    
        <li>
            <a href="integratedclustering.html">Hazelcast Configuration</a>
            
        </li>
    
        <li>
            <a href="integratedclustering.html">RegionFactory Options</a>
            
        </li>
    
        <li>
            <a href="integratedclustering.html">Hazelcast Modes for Hibernate Usage</a>
            
        </li>
    
        <li>
            <a href="integratedclustering.html">Hibernate Concurrency Strategies</a>
            
        </li>
    
        <li>
            <a href="integratedclustering.html">Advanced Settings</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="websessionreplication.html">Web Session Replication</a>
            
                
    <ol>
    
        <li>
            <a href="websessionreplication.html">Filter Based Web Session Replication</a>
            
        </li>
    
        <li>
            <a href="websessionreplication.html">Spring Security Support</a>
            
        </li>
    
        <li>
            <a href="tomcatsessionreplication.html">Tomcat Based Web Session Replication</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="springintegration.html">Spring Integration</a>
            
                
    <ol>
    
        <li>
            <a href="springintegration.html">Supported Versions</a>
            
        </li>
    
        <li>
            <a href="springintegration.html">Spring Configuration</a>
            
        </li>
    
        <li>
            <a href="springintegration.html">Spring Managed Context with @SpringAware</a>
            
        </li>
    
        <li>
            <a href="springintegration.html">Spring Cache</a>
            
        </li>
    
        <li>
            <a href="springintegration.html">Hibernate 2nd Level Cache Config</a>
            
        </li>
    
        <li>
            <a href="springintegration.html">Best Practices</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="storage.html">Storage</a>
            
                
    <ol>
    
        <li>
            <a href="storage.html">Off-Heap</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="clients.html">Clients</a>
            
                
    <ol>
    
        <li>
            <a href="javaclient.html">Java Client</a>
            
                
    <ol>
    
        <li>
            <a href="javaclient.html">Java Client Overview</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Java Client Dependencies</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Getting Started with Client API</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Java Client Operation modes</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Fail Case Handling</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Supported Distributed Data Structures</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Client Services</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Client Listeners</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Client Transactions</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Network Configuration Options</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Client Near Cache</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Client SSLConfig</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Java Client Configuration</a>
            
        </li>
    
        <li>
            <a href="javaclient.html">Sample Codes for Client</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="cplusclient.html">C++ Client</a>
            
                
    <ol>
    
        <li>
            <a href="cplusclient.html">How to Setup</a>
            
        </li>
    
        <li>
            <a href="cplusclient.html">Platform Specific Installation Guides</a>
            
        </li>
    
        <li>
            <a href="cplusclient.html">Code Examples</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="csharpclient.html">.NET Client</a>
            
                
    <ol>
    
        <li>
            <a href="csharpclient.html">Client Configuration</a>
            
        </li>
    
        <li>
            <a href="csharpclient.html">Client Startup</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="restclient.html">REST Client</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="memcacheclient.html">Memcache Client</a>
            
                
    <ol>
    
        <li>
            <a href="memcacheclient.html">Unsupported Operations</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="serialization.html">Serialization</a>
            
                
    <ol>
    
        <li>
            <a href="serialization.html">Serialization Overview</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="serializationinterfaces.html">Serialization Interfaces</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="serializationcomparisontable.html">Comparison Table</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="serializable.html">Serializable &amp; Externalizable</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="dataserialization.html">DataSerializable</a>
            
                
    <ol>
    
        <li>
            <a href="dataserialization.html">IdentifiedDataSerializable</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="portableserialization.html">Portable</a>
            
                
    <ol>
    
        <li>
            <a href="portableserialization.html">Versions</a>
            
        </li>
    
        <li>
            <a href="portableserialization.html">Null Portable Serialization</a>
            
        </li>
    
        <li>
            <a href="portableserialization.html">DistributedObject Serialization</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="customserialization.html">Custom Serialization</a>
            
                
    <ol>
    
        <li>
            <a href="customserialization.html">StreamSerializer</a>
            
        </li>
    
        <li>
            <a href="bytearrayserializer.html">ByteArraySerializer</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="hazelcastinstanceaware.html">HazelcastInstanceAware Interface</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="management.html">Management</a>
            
                
    <ol>
    
        <li>
            <a href="management.html">Statistics API per Node</a>
            
                
    <ol>
    
        <li>
            <a href="management.html">Map Statistics</a>
            
        </li>
    
        <li>
            <a href="management.html">Multimap Statistics</a>
            
        </li>
    
        <li>
            <a href="management.html">Queue Statistics</a>
            
        </li>
    
        <li>
            <a href="management.html">Topic Statistics</a>
            
        </li>
    
        <li>
            <a href="management.html">Executor Statistics</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="jmxapipernode.html">JMX API per Node</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="monitoringwithjmx.html">Monitoring with JMX</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="clusterutilities.html">Cluster Utilities</a>
            
                
    <ol>
    
        <li>
            <a href="clusterutilities.html">Cluster Interface</a>
            
        </li>
    
        <li>
            <a href="memberattributes.html">Member Attributes</a>
            
        </li>
    
        <li>
            <a href="partitionservice.html">Cluster-Member Safety Check</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="managementcenter.html">Management Center</a>
            
                
    <ol>
    
        <li>
            <a href="managementcenter.html">Introduction</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Tool Overview</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Home Page</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Caches</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Maps</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Queues</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Topics</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">MultiMaps</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Executors</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Members</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Scripting</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Console</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Alerts</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Administration</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Time Travel</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Documentation</a>
            
        </li>
    
        <li>
            <a href="managementcenter.html">Suggested Heap Size</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="clusteredjmx.html">Clustered JMX</a>
            
                
    <ol>
    
        <li>
            <a href="clusteredjmx.html">Clustered JMX Configuration</a>
            
        </li>
    
        <li>
            <a href="clusteredjmx.html">API Documentation</a>
            
        </li>
    
        <li>
            <a href="clusteredjmx.html">New Relic Integration</a>
            
        </li>
    
        <li>
            <a href="clusteredjmx.html">AppDynamics Integration</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="clusteredrest.html">Clustered REST</a>
            
                
    <ol>
    
        <li>
            <a href="clusteredrest.html">Enabling Clustered REST</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Clustered REST API Root</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Clusters Resource</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Cluster Resource</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Members Resource</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Member Resource</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Clients Resource</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Maps Resource</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">MultiMaps Resource</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Queues Resource</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Topics Resource</a>
            
        </li>
    
        <li>
            <a href="clusteredrest.html">Executors Resource</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="security.html">Security</a>
            
                
    <ol>
    
        <li>
            <a href="security.html">Enabling Security for Hazelcast Enterprise</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="socketinterceptor.html">Socket Interceptor</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="securityinterceptor.html">Security Interceptor</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="encryption.html">Encryption</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="ssl.html">SSL</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="credentials.html">Credentials</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="clusterloginmodule.html">ClusterLoginModule</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="clustermembersecurity.html">Cluster Member Security</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="nativeclientsecurity.html">Native Client Security</a>
            
                
    <ol>
    
        <li>
            <a href="nativeclientsecurity.html">Authentication</a>
            
        </li>
    
        <li>
            <a href="nativeclientsecurity.html">Authorization</a>
            
        </li>
    
        <li>
            <a href="nativeclientsecurity.html">Permissions</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="performance.html">Performance</a>
            
                
    <ol>
    
        <li>
            <a href="performance.html">Data Affinity</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="threadingmodel.html">Threading Model</a>
            
                
    <ol>
    
        <li>
            <a href="threadingmodel.html">I/O Threading</a>
            
        </li>
    
        <li>
            <a href="threadingevent.html">Event Threading</a>
            
        </li>
    
        <li>
            <a href="threadingexecutor.html">IExecutor Threading</a>
            
        </li>
    
        <li>
            <a href="threadingoperation.html">Operation Threading</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="wan.html">WAN</a>
            
                
    <ol>
    
        <li>
            <a href="wan.html">WAN Replication</a>
            
                
    <ol>
    
        <li>
            <a href="wan.html">WAN Replication Configuration</a>
            
        </li>
    
        <li>
            <a href="wan.html">WAN Replication Queue Size</a>
            
        </li>
    
        <li>
            <a href="wan.html">WAN Replication Additional Information</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="config.html">Configuration</a>
            
                
    <ol>
    
        <li>
            <a href="config.html">Using Wildcard</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="networkconfig.html">Network Configuration</a>
            
                
    <ol>
    
        <li>
            <a href="networkconfig.html">Configuring TCP/IP Cluster</a>
            
        </li>
    
        <li>
            <a href="configspecifyinterfaces.html">Specifying Network Interfaces</a>
            
        </li>
    
        <li>
            <a href="ec2autodiscovery.html">EC2 Auto Discovery</a>
            
        </li>
    
        <li>
            <a href="ports.html">Ports</a>
            
        </li>
    
        <li>
            <a href="ipv6.html">IPv6 Support</a>
            
        </li>
    
        <li>
            <a href="partitiongroupconfig.html">Partition Grouping</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="listenerconfig.html">Listener Configurations</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="logging.html">Logging Configuration</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="configurationproperties.html">Advanced Configuration Properties</a>
            
                
    <ol>
    
        <li>
            <a href="configurationproperties.html">Declarative Configuration</a>
            
        </li>
    
        <li>
            <a href="configurationproperties.html">Programmatic Configuration</a>
            
        </li>
    
        <li>
            <a href="configurationproperties.html">System Property</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="networkpartitioning.html">Network Partitioning - Split Brain Syndrome</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">Frequently Asked Questions</a>
            
                
    <ol>
    
        <li>
            <a href="faq.html">Why 271 as the default partition count</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">Is Hazelcast thread safe</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How do nodes discover each other</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">What happens when a node goes down</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How do I test the connectivity</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How do I choose keys properly</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How do I reflect value modifications</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How do I test my Hazelcast cluster</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How do I create separate clusters</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">Does Hazelcast support hundreds of nodes</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">Does Hazelcast support thousands of clients</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">What is the difference between old LiteMember and new Smart Client</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How do you give support</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">Does Hazelcast persist</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">Can I use Hazelcast in a single server</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How can I monitor Hazelcast</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How can I see debug level logs</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">What is the difference between client-server and embedded topologies</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">How do I know it is safe to kill the second node</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">When do I need Off-heap solutions</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">Is there any disadvantage of using near-cache</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="faq.html">Is Hazelcast secure</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="glossary.html">Glossary</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

	    </nav>
	    
	    <nav id="links">
	        <ul>
	            
	        </ul>
	    </nav>
	    
		<div id="copyright">
			Powered by <a href="http://github.com/maximebf/beautiful-docs">beautiful-docs</a> -
	        <a href="#top">Back to top</a>
		</div>
	
	</div>

	        <div id="content">
	            <h3 id="introduction-to-mapreduce-api">Introduction to MapReduce API</h3>
<p>This section explains basics of the Hazelcast MapReduce framework. While walking through the different API classes, we will build the word count example that was discussed earlier and create it step by step.</p>
<p>The Hazelcast API for MapReduce operations consists of a fluent DSL like configuration syntax to build and submit jobs. JobTracker is the basic entry point to all MapReduce operations and is retrieved from <code>com.hazelcast.core.HazelcastInstance</code> by calling <code>getJobTracker</code> and supplying the name of the required JobTracker configuration. The configuration for JobTrackers will be discussed later, for now we focus on the API itself.
In addition, the complete submission part of the API is built to support a fully reactive way of programming.</p>
<p>To give an easy introduction to people that are already used to Hadoop, we decided to create the class names as familiar as possible to their counterparts on Hadoop. That means while most users will recognize a lot of similar sounding classes, the way to configure the jobs is more fluent due to the already mentioned DSL like styled API.</p>
<p>While building the example, we will go through as much options as possible, e.g. we create a specialized JobTracker configuration (at the end). Special JobTracker configuration are not required, as for all other Hazelcast features you can use &quot;default&quot; as the configuration name, but special configurations offer better options to predict behavior of the framework while execution.</p>
<p>The full example is available <a href="http://github.com/noctarius/hz-map-reduce">here</a> as a ready to run Maven project.</p>
<h4 id="jobtracker">JobTracker</h4>
<p>The JobTracker is used to create Job instances whereas every instance of <code>com.hazelcast.mapreduce.Job</code> defines a single MapReduce configuration. The same Job can be submitted multiple times, no matter if executed in parallel or after the previous execution is finished.</p>
<p><img src="images/NoteSmall.jpg" alt="image"> <strong><em>NOTE:</em></strong> <em>After retrieving the JobTracker, be aware of the fact that it should only be used with data structures derived from the same HazelcastInstance. Otherwise you can get unexpected behavior</em></p>
<p>To retrieve a JobTracker from Hazelcast, we will start by using the &quot;default&quot; configuration for convenience reasons to show the basic way.</p>
<pre><code class="lang-java">import com.hazelcast.mapreduce.*;

JobTracker jobTracker = hazelcastInstance.getJobTracker( &quot;default&quot; );
</code></pre>
<p>JobTracker is retrieved using the same kind of entry point as most of other Hazelcast features. After building the cluster connection, you use the created HazelcastInstance to request the configured (or default) JobTracker from Hazelcast.</p>
<p>Next step will be to create a new Job and configure it to execute our first MapReduce request against cluster data.</p>
<h4 id="job">Job</h4>
<p>As mentioned in the last section, a Job is created using the retrieved JobTracker instance. A Job defines exactly one configuration of a MapReduce task. Mapper, combiner and reducers will be defined per job but since the Job instance is only a configuration, it is possible to be submitted multiple times, no matter if executions happening in parallel or one after the other.</p>
<p>A submitted job is always identified using a unique combination of the JobTracker&#39;s name and a, on submit-time generated, jobId. The way for retrieving the jobId will be shown in one of the later sections.</p>
<p>To create a Job, a second class <code>com.hazelcast.mapreduce.KeyValueSource</code> is necessary. We will have a deeper look at the KeyValueSource class in the next section, for now it is enough to know that it is used to wrap any kind of data or data structure into a well defined set of key-value pairs.</p>
<p>Below example code is a direct follow up of the example of the JobTracker section and reuses the already created HazelcastInstance and JobTracker instances.</p>
<p>We start by retrieving an instance of our data map and create the Job instance afterwards. Implementations used to configure the Job will be discussed while walking further through the API documentation, they are not yet discussed.</p>
<p><img src="images/NoteSmall.jpg" alt="image"> <strong><em>NOTE:</em></strong> <em>Since the Job class is highly depending on generics to support type safety, the generics change over time and may not be assignment compatible to old variable types. To make use of the full potential of the fluent API, we recommend to use fluent method chaining as shown in this example to prevent the need of too much variables.</em></p>
<pre><code class="lang-java">IMap&lt;String, String&gt; map = hazelcastInstance.getMap( &quot;articles&quot; );
KeyValueSource&lt;String, String&gt; source = KeyValueSource.fromMap( map );
Job&lt;String, String&gt; job = jobTracker.newJob( source );

ICompletableFuture&lt;Map&lt;String, Long&gt;&gt; future = job
    .mapper( new TokenizerMapper() )
    .combiner( new WordCountCombinerFactory() )
    .reducer( new WordCountReducerFactory() )
    .submit();

// Attach a callback listener
future.andThen( buildCallback() );

// Wait and retrieve the result
Map&lt;String, Long&gt; result = future.get();
</code></pre>
<p>As seen above, we create the Job instance and define a mapper, combiner, reducer and eventually submit the request to the cluster. The <code>submit</code> method returns an ICompletableFuture that can be used to attach our callbacks or just to wait for the result to be processed in a blocking fashion.</p>
<p>There are more options available for job configuration like defining a general chunk size or on what keys the operation will be operate. For more information, please consolidate the Javadoc matching your used Hazelcast version.</p>
<h4 id="keyvaluesource">KeyValueSource</h4>
<p>The KeyValueSource is able to either wrap Hazelcast data structures (like IMap, MultiMap, IList, ISet) into key-value pair input sources or to build your own custom key-value input source. The latter option makes it possible to feed Hazelcast MapReduce with all kind of data like just-in-time downloaded web page contents or data files. People familiar with  Hadoop will recognize similarities with the Input class.</p>
<p>You can imagine a KeyValueSource as a bigger <code>java.util.Iterator</code> implementation. Whereas most methods are required to be implemented, <code>getAllKeys</code> is optional to implement. If implementation is able to gather all keys upfront, it should be implemented and <code>isAllKeysSupported</code> must return true, that way Job configured KeyPredicates are able to be evaluate keys upfront before sending them to the cluster. Otherwise, they are serialized and transferred as well to be evaluated at execution time.</p>
<p>As shown in the example above, the abstract KeyValueSource class provides a number of static methods to easily wrap Hazelcast data structures into KeyValueSource implementations already provided by Hazelcast. The data structures&#39; generics are inherited into the resulting KeyValueSource instance. For data structures like IList or ISet, the key type is always String. While mapping, the key is the data structure&#39;s name whereas
the value type and value itself are inherited from the IList or ISet itself.</p>
<pre><code class="lang-java">// KeyValueSource from com.hazelcast.core.IMap
IMap&lt;String, String&gt; map = hazelcastInstance.getMap( &quot;my-map&quot; );
KeyValueSource&lt;String, String&gt; source = KeyValueSource.fromMap( map );
</code></pre>
<pre><code class="lang-java">// KeyValueSource from com.hazelcast.core.MultiMap
MultiMap&lt;String, String&gt; multiMap = hazelcastInstance.getMultiMap( &quot;my-multimap&quot; );
KeyValueSource&lt;String, String&gt; source = KeyValueSource.fromMultiMap( multiMap );
</code></pre>
<pre><code class="lang-java">// KeyValueSource from com.hazelcast.core.IList
IList&lt;String&gt; list = hazelcastInstance.getList( &quot;my-list&quot; );
KeyValueSource&lt;String, String&gt; source = KeyValueSource.fromList( list );
</code></pre>
<pre><code class="lang-java">// KeyValueSource from com.hazelcast.core.IList
ISet&lt;String&gt; set = hazelcastInstance.getSet( &quot;my-set&quot; );
KeyValueSource&lt;String, String&gt; source = KeyValueSource.fromSet( set );
</code></pre>
<p><strong>PartitionIdAware</strong></p>
<p>The <code>com.hazelcast.mapreduce.PartitionIdAware</code> interface can be implemented by the KeyValueSource implementation if the underlying data set is aware of the Hazelcast partitioning schema (as it is for all internal data structures). If this interface is implemented, the same KeyValueSource instance is reused multiple times for all partitions on the cluster node. As a consequence, the <code>close</code> and <code>open</code> methods are also executed
multiple times but once per partitionId.</p>
<h4 id="mapper">Mapper</h4>
<p>Using the Mapper interface, you will implement the mapping logic. Mappers can transform, split, calculate, aggregate data from data sources. In Hazelcast, it is also possible to integrate data from more than the KeyValueSource data source by implementing <code>com.hazelcast.core.HazelcastInstanceAware</code> and requesting additional maps, multimaps, list, sets.</p>
<p>The mappers <code>map</code> function is called once per available entry in the data structure. If you work on distributed data structures that operate in a partition based fashion, then multiple mappers work in parallel on the different cluster nodes, on the nodes&#39; assigned partitions. Mappers then prepare and maybe transform the input key-value pair and emit zero or more key-value pairs for reducing phase.</p>
<p>For our word count example, we retrieve an input document (a text document) and we transform it by splitting the text into the available words. After that, as discussed in the pseudo code, we emit every single word with a key-value pair of the word itself as key and 1 as the value.</p>
<p>A common implementation of that Mapper might look like the following example:</p>
<pre><code class="lang-java">public class TokenizerMapper implements Mapper&lt;String, String, String, Long&gt; {
  private static final Long ONE = Long.valueOf( 1L );

  @Override
  public void map(String key, String document, Context&lt;String, Long&gt; context) {
    StringTokenizer tokenizer = new StringTokenizer( document.toLowerCase() );
    while ( tokenizer.hasMoreTokens() ) {
      context.emit( tokenizer.nextToken(), ONE );
    }
  }
}
</code></pre>
<p>The code is pretty basic and just splits the mapped texts into their tokens and iterate over the tokenizer as long as there are more tokens and emits a pair per word. What is to note, we&#39;re not yet collecting multiple occurrences of the same word but just fire every word on its own.</p>
<p><strong>LifecycleMapper / LifecycleMapperAdapter</strong></p>
<p>The LifecycleMapper interface or its adapter class LifecycleMapperAdapter can be used to make the Mapper implementation lifecycle aware. That means it will be notified when mapping of a partition or set of data begins and when the last entry was mapped.</p>
<p>Only special algorithms might have a need for those additional lifecycle events to perform preparation, cleanup or emit additional values.</p>
<h4 id="combiner-combinerfactory">Combiner / CombinerFactory</h4>
<p>As stated in the introduction, a Combiner is used to minimize traffic between the different cluster nodes when transmitting mapped values from mappers to the reducers by aggregating multiple values for the same emitted key. This is a fully optional operation but is highly recommended to be used.</p>
<p>Combiners can be seen as an intermediate reducer. The calculated value is always assigned back to the key for which the combiner initially was created. Since combiners are created per emitted key, not the Combiner implementation itself is defined in the jobs configuration but a CombinerFactory that is able to create the expected Combiner instance.</p>
<p>Due to the fact that Hazelcast MapReduce is executing mapping and reducing phase in parallel, the Combiner implementation must be able to deal with chunked data. That means, it is required to reset its internal state whenever <code>finalizeChunk</code> is called. Calling that method creates a chunk of intermediate data to be grouped (shuffled) and sent to the reducers.</p>
<p>Combiners can override <code>beginCombine</code> and <code>finalizeCombine</code> to perform preparation or cleanup work.</p>
<p>For our word count example, we are going to have a simple CombinerFactory and Combiner implementation similar to the following one:</p>
<pre><code class="lang-java">public class WordCountCombinerFactory
    implements CombinerFactory&lt;String, Long, Long&gt; {

  @Override
  public Combiner&lt;Long, Long&gt; newCombiner( String key ) {
    return new WordCountCombiner();
  }

  private class WordCountCombiner extends Combiner&lt;Long, Long&gt; {
    private long sum = 0;

    @Override
    public void combine( Long value ) {
      sum++;
    }

    @Override
    public Long finalizeChunk() {
      return sum;
    }

    @Override
    public void reset() {
      sum = 0;
    }
  }
}
</code></pre>
<p>As mentioned before, the Combiner must be able to return its current value as a chunk and reset the internal state by setting sum back to 0. Since combiners are always called from a single thread, no synchronization or volatility of the variables is necessary.</p>
<h4 id="reducer-reducerfactory">Reducer / ReducerFactory</h4>
<p>Reducers doing the last bit of algorithm work. This can be aggregating values, calculating averages or anything else that is expected by the algorithm to work.</p>
<p>Since values arrive in chunks, the reduce method is called multiple times for every emitted value of the creation key. This also can happen multiple times per chunk if no Combiner implementation was configured for a job configuration.</p>
<p>In difference of the combiners, a reducers <code>finalizeReduce</code> method is only called once per reducer (which means once per key). So, a reducer does not need to be able to reset its internal state at any time.</p>
<p>Reducers can override <code>beginReduce</code> to perform preparation work.</p>
<p>Again for our word count example, the implementation will look similar to the following code snippet:</p>
<pre><code class="lang-java">public class WordCountReducerFactory implements ReducerFactory&lt;String, Long, Long&gt; {

  @Override
  public Reducer&lt;Long, Long&gt; newReducer( String key ) {
    return new WordCountReducer();
  }

  private class WordCountReducer extends Reducer&lt;Long, Long&gt; {
    private volatile long sum = 0;

    @Override
    public void reduce( Long value ) {
      sum += value.longValue();
    }

    @Override
    public Long finalizeReduce() {
      return sum;
    }
  }
}
</code></pre>
<p>Different from combiners, reducer tends to switch threads if running out of data to prevent blocking threads from the JobTracker configuration. They are rescheduled at a later point when new data to be processed arrives but unlikely to be executed on the same thread as before. Due to this fact, some volatility of the internal state might be necessary.</p>
<h4 id="collator">Collator</h4>
<p>A Collator is an optional operation that is executed on the job emitting node and is able to modify the finally reduced result before returned to the user&#39;s codebase. Only special use cases are likely to make use of collators.</p>
<p>For an imaginary use case, we might want to know how many words were all over in the documents we analyzed and for this case, a Collator implementation can be given to the <code>submit</code> method of the Job instance.</p>
<p>A collator would look like the following snippet:</p>
<pre><code class="lang-java">public class WordCountCollator implements Collator&lt;Map.Entry&lt;String, Long&gt;, Long&gt; {

  @Override
  public Long collate( Iterable&lt;Map.Entry&lt;String, Long&gt;&gt; values ) {
    long sum = 0;

    for ( Map.Entry&lt;String, Long&gt; entry : values ) {
      sum += entry.getValue().longValue();
    }
    return sum;
  }
}
</code></pre>
<p>The definition of the input type is a bit strange but due to the fact that Combiner and Reducer implementations are optional, the input type heavily depends on the state of the data. As stated above, collators are non-typical use cases and the generics of the framework always help in finding the correct signature.</p>
<h4 id="keypredicate">KeyPredicate</h4>
<p>A KeyPredicate can be used to pre-select if a key should be selected for mapping in the mapping phase. If the KeyValueSource implementation is able to know all keys upfront to execution, the keys are filtered before the operations are divided to the different cluster nodes.</p>
<p>It is also possible to be used to select only a special range of data (e.g. a time-frame) or similar use cases.</p>
<p>A basic KeyPredicate implementation to only map keys containing the word &quot;hazelcast&quot; might look like the following code class:</p>
<pre><code class="lang-java">public class WordCountKeyPredicate implements KeyPredicate&lt;String&gt; {

  @Override
  public boolean evaluate( String s ) {
    return s != null &amp;&amp; s.toLowerCase().contains( &quot;hazelcast&quot; );
  }
}
</code></pre>
<h4 id="trackablejob-and-job-monitoring">TrackableJob and Job Monitoring</h4>
<p>A TrackableJob instance can be retrieved after submitting a job. It is requested from the JobTracker using the, per JobTracker, unique jobId. It can be used to get runtime statistics of the job. At the moment, the information available are limited to the number of processed (mapped) records and the processing state of the different partitions or nodes (if KeyValueSource is not PartitionIdAware).</p>
<p>To retrieve the jobId after submission of the job, use <code>com.hazelcast.mapreduce.JobCompletableFuture</code> instead of the <code>com.hazelcast.core.ICompletableFuture</code> as variable type for the returned future.</p>
<p>Below snippet will give a quick introduction on how to retrieve the instance and the runtime data. For more information, please have a look at the Javadoc corresponding your running Hazelcast version.</p>
<pre><code class="lang-java">IMap&lt;String, String&gt; map = hazelcastInstance.getMap( &quot;articles&quot; );
KeyValueSource&lt;String, String&gt; source = KeyValueSource.fromMap( map );
Job&lt;String, String&gt; job = jobTracker.newJob( source );

JobCompletableFuture&lt;Map&lt;String, Long&gt;&gt; future = job
    .mapper( new TokenizerMapper() )
    .combiner( new WordCountCombinerFactory() )
    .reducer( new WordCountReducerFactory() )
    .submit();

String jobId = future.getJobId();
TrackableJob trackableJob = jobTracker.getTrackableJob(jobId);

JobProcessInformation stats = trackableJob.getJobProcessInformation();
int processedRecords = stats.getProcessedRecords();
log( &quot;ProcessedRecords: &quot; + processedRecords );

JobPartitionState[] partitionStates = stats.getPartitionStates();
for ( JobPartitionState partitionState : partitionStates ) {
  log( &quot;PartitionOwner: &quot; + partitionState.getOwner()
          + &quot;, Processing state: &quot; + partitionState.getState().name() );
}
</code></pre>
<p><img src="images/NoteSmall.jpg" alt="image"> <strong><em>NOTE:</em></strong> <em>Caching of the JobProcessInformation does not work on Java native clients since current values are retrieved while retrieving the instance to minimize traffic between executing node and client.</em></p>
<h4 id="jobtracker-configuration">JobTracker Configuration</h4>
<p>The JobTracker configuration is used to setup behavior of the Hazelcast MapReduce framework.</p>
<p>Every JobTracker is capable of running multiple MapReduce jobs at once and so one configuration is meant as a shared resource for all jobs created by the same JobTracker. The configuration gives full control over the expected load behavior and thread counts to be used.</p>
<p>The following snippet shows a typical JobTracker configuration. We will discuss the configuration properties one by one:</p>
<pre><code class="lang-xml">&lt;jobtracker name=&quot;default&quot;&gt;
  &lt;max-thread-size&gt;0&lt;/max-thread-size&gt;
  &lt;!-- Queue size 0 means number of partitions * 2 --&gt;
  &lt;queue-size&gt;0&lt;/queue-size&gt;
  &lt;retry-count&gt;0&lt;/retry-count&gt;
  &lt;chunk-size&gt;1000&lt;/chunk-size&gt;
  &lt;communicate-stats&gt;true&lt;/communicate-stats&gt;
  &lt;topology-changed-strategy&gt;CANCEL_RUNNING_OPERATION&lt;/topology-changed-strategy&gt;
&lt;/jobtracker&gt;
</code></pre>
<ul>
<li><strong>max-thread-size:</strong> Configures the maximum thread pool size of the JobTracker.</li>
<li><strong>queue-size:</strong> Defines the maximum number of tasks that are able to wait to be processed. A value of 0 means unbounded queue. Very low numbers can prevent successful execution since job might not be correctly scheduled or intermediate chunks are lost.</li>
<li><strong>retry-count:</strong> Currently not used but reserved for later use where the framework will automatically try to restart / retry operations from an available save point.</li>
<li><strong>chunk-size:</strong> Defines the number of emitted values before a chunk is sent to the reducers. If your emitted values are big or you want to better balance your work, you might want to change this to a lower or higher value. A value of 0 means immediate transmission but remember that low values mean higher traffic costs. A very high value might cause an OutOfMemoryError to occur if emitted values not fit into heap memory before
being sent to reducers. To prevent this, you might want to use a combiner to pre-reduce values on mapping nodes.</li>
<li><strong>communicate-stats:</strong> Defines if statistics (for example about processed entries) are transmitted to the job emitter. This might be used to show any kind of progress to a user inside of an UI system but produces additional traffic. If not needed, you might want to deactivate this.</li>
<li><strong>topology-changed-strategy:</strong> Defines how the MapReduce framework will react on topology changes while executing a job. Currently, only CANCEL_RUNNING_OPERATION is fully supported which throws an exception to the job emitter (will throw a <code>com.hazelcast.mapreduce.TopologyChangedException</code>).</li>
</ul>




	        </div>
	        </div>			
    </div>
</body>
</html>
